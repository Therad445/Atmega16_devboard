/*
 * Atmega16_test.cpp
 *
 * Created: 11.04.2022 21:44:49
 * Author : Иван
 */ 

#include <avr/io.h>
#define F_CPU 8000000UL
#include <util/delay.h>


void deshifr(unsigned int number)
{
	unsigned int firstnumber = 10;
	unsigned int secondnumber = 10;
	unsigned int thirdnumber = 10;
	
	if (number < 10)
	{
		thirdnumber = number;
		secondnumber = 10;
		firstnumber = 10;
	} else {
		if (number < 100)
		{
			thirdnumber = number % 10;
			secondnumber = number / 10;
			firstnumber = 10;
		} else {
			firstnumber = 1;
			secondnumber = 0;
			thirdnumber = 0;
		}
	}
	PORTB = 0b00000011;
	switch ( thirdnumber ) {
		case 0:
			PORTC = 0b00111111;
			break;
		case 1:
			PORTC = 0b00000110;
			break;
		case 2:
			PORTC = 0b01011011;
			break;
		case 3:
			PORTC = 0b01001111;
			break;
		case 4:
			PORTC = 0b01100110;
			break;
		case 5:
			PORTC = 0b01101101;
			break;
		case 6:
			PORTC = 0b01111101;
			break;
		case 7:
			PORTC = 0b00000111;
			break;
		case 8:
			PORTC = 0b01111111;
			break;
		case 9:
			PORTC = 0b01101111;
			break;
		default:
			PORTC = 0b00000000;
			break;
	}
	_delay_ms(1);
	PORTB = 0b00000101;
	switch ( secondnumber ) {
		case 0:
			PORTC = 0b00111111;
			break;
		case 1:
			PORTC = 0b00000110;
			break;
		case 2:
			PORTC = 0b01011011;
			break;
		case 3:
			PORTC = 0b01001111;
			break;
		case 4:
			PORTC = 0b01100110;
			break;
		case 5:
			PORTC = 0b01101101;
			break;
		case 6:
			PORTC = 0b01111101;
			break;
		case 7:
			PORTC = 0b00000111;
			break;
		case 8:
			PORTC = 0b01111111;
			break;
		case 9:
			PORTC = 0b01101111;
			break;
		default:
			PORTC = 0b00000000;
			break;
	}
	_delay_ms(1);
	PORTB = 0b00000110;
	switch ( firstnumber ) {
		case 0:
			PORTC = 0b00111111;
			break;
		case 1:
			PORTC = 0b00000110;
			break;
		case 2:
			PORTC = 0b01011011;
			break;
		case 3:
			PORTC = 0b01001111;
			break;
		case 4:
			PORTC = 0b01100110;
			break;
		case 5:
			PORTC = 0b01101101;
			break;
		case 6:
			PORTC = 0b01111101;
			break;
		case 7:
			PORTC = 0b00000111;
			break;
		case 8:
			PORTC = 0b01111111;
			break;
		case 9:
			PORTC = 0b01101111;
			break;
		default:
			PORTC = 0b00000000;
			break;
	}
	_delay_ms(1);
}

int main(void)
{
	DDRC = 0b11111111;
	DDRB = 0b00000111;
    while (1) 
    {	
		deshifr(50);
    }
}

